ml () {  module ml "$@"
}
module () {  _module_raw "$@" 2>&1
}
_module_raw () {  eval `/usr/bin/tclsh8.6 /usr/lib/x86_64-linux-gnu/modulecmd.tcl bash "$@"`;
 _mlstatus=$?;
 return $_mlstatus
}
# `indexer` directory testing file

# Invalid arguments

./indexer # no arguments
Usage: ./indexer pageDirectory indexFilename
./indexer ../data/pgdir/letters # one argument
Usage: ./indexer pageDirectory indexFilename
./indexer ../data/pgdir/letters ../data/pgdir/letters ../data/pgdir/letters ../data/pgdir/letters # 3+ arguments
Usage: ./indexer pageDirectory indexFilename
./indexer ../nonexistent/letters ../data/indexer/pgdir-letters-index # non-existent pageDirectory
Error: not a crawler directory, no pageDirectory/.crawler file
Failed pagedir_validate
./indexer ../common ../data/indexer/pgdir-letters-index # not a crawler directory
Error: not a crawler directory, no pageDirectory/.crawler file
Failed pagedir_validate
./indexer ../data/pgdir/letters ../data/indexer/broken # non-existent file

# Valid arguments

./indexer ../data/pgdir/letters ../data/indexer/pgdir-letters-index

./indexer ~/cs50-dev/shared/tse/output/letters-2 ../data/indexer/letters-2-index

./indexer ~/cs50-dev/shared/tse/output/toscrape-1 ../data/indexer/toscrape-1-index

./indexer ~/cs50-dev/shared/tse/output/wikipedia_1 ../data/indexer/wikipedia_2-index

# indextest test

./indextest ../data/indexer/pgdir-letters-index ../data/indexer/indextest/IT_pgdir-letters-index

# Valgrind tests

valgrind ./indextest ../data/pgdir/letters ../data/indexer/pgdir-letters-index
==1915300== Memcheck, a memory error detector
==1915300== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==1915300== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info
==1915300== Command: ./indextest ../data/pgdir/letters ../data/indexer/pgdir-letters-index
==1915300== 
==1915300== 
==1915300== HEAP SUMMARY:
==1915300==     in use at exit: 0 bytes in 0 blocks
==1915300==   total heap usage: 307 allocs, 307 frees, 14,049 bytes allocated
==1915300== 
==1915300== All heap blocks were freed -- no leaks are possible
==1915300== 
==1915300== For lists of detected and suppressed errors, rerun with: -s
==1915300== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)

valgrind ./indextest ../data/indexer/pgdir-letters-index ../data/indexer/indextest/it-pgdir-letters-index
==1915407== Memcheck, a memory error detector
==1915407== Copyright (C) 2002-2017, and GNU GPL'd, by Julian Seward et al.
==1915407== Using Valgrind-3.18.1 and LibVEX; rerun with -h for copyright info
==1915407== Command: ./indextest ../data/indexer/pgdir-letters-index ../data/indexer/indextest/it-pgdir-letters-index
==1915407== 
==1915407== 
==1915407== HEAP SUMMARY:
==1915407==     in use at exit: 0 bytes in 0 blocks
==1915407==   total heap usage: 307 allocs, 307 frees, 14,049 bytes allocated
==1915407== 
==1915407== All heap blocks were freed -- no leaks are possible
==1915407== 
==1915407== For lists of detected and suppressed errors, rerun with: -s
==1915407== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
